<body>
  <%= render "shared/left_panel" %>
  <div id="right-panel" class="right-panel">
    <div class="breadcrumbs">
      <div class="col-sm-4">
        <div class="page-header float-left">
          <div class="page-title">
            <h1>Dashboard</h1>
          </div>
        </div>
      </div>
      <div class="col-sm-8">
        <div class="page-header float-right">
          <div class="page-title">
            <ol class="breadcrumb text-right">
              <li><a href="#">Dashboard</a></li>
              <li><a href="#">網頁內容</a></li>
              <li class="active">文案</li>
            </ol>
          </div>
        </div>
      </div>
    </div>
    <div class="content mt-3">
      <div class="row">
        <div class="col-lg-12">
          <div class="card">
            <%= form_for @wording, :url => wording_create_path do |f| %>
              <div class="card-header"><strong>編輯</strong></div>
              <div class="card-body card-block">
                <div class="form-group">
                  <%= f.label("名稱", :class => 'form-control-label') %><%= f.text_field(:name, :class => "form-control", placeholder: "輸入標題")%>
                </div>
                <div class="form-group">
                  <button type="button" class="btn btn-secondary" id="import_text">
                    <i class="fa fa-calendar"></i>&nbsp; [故事]對話格式(文)
                  </button>
                  <button type="button" class="btn btn-success" id="import_img">
                    <i class="fa fa-calendar-o"></i>&nbsp; [故事]對話格式(圖)
                  </button>
                  <button type="button" class="btn btn-warning" id="import_card">
                    <i class="fa fa-calendar-check-o"></i>&nbsp; [故事]卡片格式
                  </button><br/>
                  <button type="button" class="btn btn-info" id="import_mes_farmer_text">
                    <i class="fa fa-calendar-minus-o"></i>&nbsp; [臉書][農友]對話格式(文)
                  </button>
                  <button type="button" class="btn btn-info" id="import_mes_user_text">
                    <i class="fa fa-calendar-minus-o"></i>&nbsp; [臉書][網友]對話格式(文)
                  </button>
                  <%= f.text_area(:content, :class => "form-control", placeholder: "輸入內容", rows: 20)%>
                </div>
              </div>
              <div class="card-footer">
                <button type="button" class="btn btn-warning btn-sm" id="validate_json">
                  <i class="fa fa-dot-circle-o"></i> 驗證
                </button>
                <button type="submit" class="btn btn-primary btn-sm">
                  <i class="fa fa-dot-circle-o"></i> 送出
                </button>
                <button type="reset" class="btn btn-danger btn-sm">
                  <i class="fa fa-ban"></i> 清除
                </button>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  $('#import_text').on('click', function () {
    $("#wording_name").val("TEAFU.STORY.MESSAGE.[請輸入數字]");
    $("#wording_content").val("{\n\"NAME\":\"TEAFU.STORY.MESSAGE.[請輸入數字]\",\n\"type\":\"text\",\n\"text\":\"[請輸入文字]\",\n\"delay\":\"[延遲秒數]\"\n}");
  })
  $('#import_img').on('click', function () {
    $("#wording_name").val("TEAFU.STORY.MESSAGE.[請輸入數字]");
    $("#wording_content").val("{\n\"NAME\": \"TEAFU.STORY.MESSAGE.[請輸入數字]\",\n\"type\":\"image\",\n\"url\":\"[請輸入圖片網址]\",\n\"delay\":\"[延遲秒數]\"\n}");
  })
  $('#import_card').on('click', function () {
    $("#wording_name").val("TEAFU.STORY.LEVEL.[請輸入數字]");
    $("#wording_content").val("[\n{\n\"title\": \"我是台灣特有種\",\n\"subtitle\":\"我是一隻瀕臨絕種的小青蛙，身處在北部高山.....\",\n\"image_url\": \"http://story.sogi.com.tw/showjpg/story_001.jpg\",\n\"buttons\": [\n{\n\"type\": \"postback\",\n\"title\": \"我想了解茶福的身世\",\n\"payload\": \"01_ShenShi\"\n}\n]\n},\n{\n\"title\": \"我是被年改的公務員\",\n\"subtitle\":\"我是位繁忙的上班族，好想要來一杯文山包種茶.....\",\n\"image_url\": \"http://story.sogi.com.tw/showjpg/story_002.jpg\",\n\"buttons\": [\n{\n\"type\": \"postback\",\n\"title\": \"我想了解茶福的職業\",\n\"payload\": \"01_JOB\"\n}\n]\n},\n{\n\"title\": \"我的老家有年獸！\",\n\"subtitle\":\"牠！每年都會跑出來大鬧坪林街上一次.....\",\n\"image_url\": \"http://story.sogi.com.tw/showjpg/story_003.jpg\",\n\"buttons\": [\n{\n\"type\": \"postback\",\n\"title\": \"我想了解茶福的老家\",\n\"payload\": \"01_JOB\"\n}\n]\n}\n]");
  })
  $('#import_mes_farmer_text').on('click', function () {
    $("#wording_name").val("TEAFU.B2B.PROJECT.[請輸入數字]");
    $("#wording_content").val("[{\n\"NAME\": \"TEAFU.B2B.PROJECT.[請輸入數字].[請輸入數字]\",\n\"type\": \"text\",\n\"text\": \"您已完成追蹤，若有這項提案最新消息茶福會通知您唷。\",\n\"delay\": \"1\"\n},\n{\n\"NAME\": \"TEAFU.B2B.PROJECT.[請輸入數字].[請輸入數字]\",\n\"type\": \"text\",\n\"text\": \"還有～還有～其他提案也很精彩值得你關注喔。\",\n\"delay\": \"1\"\n}\n]");
  })
  $('#import_mes_user_text').on('click', function () {
    $("#wording_name").val("TEAFU.B2C.PROJECT.[請輸入數字]");
    $("#wording_content").val("[{\n\"NAME\": \"TEAFU.B2C.PROJECT.[請輸入數字].[請輸入數字]\",\n\"type\": \"text\",\n\"text\": \"您已完成追蹤，若有這項提案最新消息茶福會通知您唷。\",\n\"delay\": \"1\"\n},\n{\n\"NAME\": \"TEAFU.B2C.PROJECT.[請輸入數字].[請輸入數字]\",\n\"type\": \"text\",\n\"text\": \"還有～還有～其他提案也很精彩值得你關注喔。\",\n\"delay\": \"1\"\n}\n]");
  })
  $('#validate_json').on('click', function () {
    try {
      var c = $.parseJSON($("#wording_content").val());
      alert("有效的Json格式")
    }
    catch (err) {
      alert("無效的Json格式")
    }
  })
</script>